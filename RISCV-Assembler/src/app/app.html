<main class="h-screen bg-gray-900 text-white">
  <nav class="w-full bg-blue-600 flex items-center justify-center h-12 text-lg font-semibold">
    RISCV-Assembler
  </nav>

  <!-- TOOLBAR -->
  <div class="flex flex-wrap justify-between items-center p-2 gap-2">
    <button (click)="fileInput.click()" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded">Import</button>
    <div class="flex flex-row gap-2">
      <select [(ngModel)]="selectedInputFormat" class="bg-gray-700 border border-gray-500 p-1 rounded" (change)="onInputFormatChange($event)">
        <option value="riscv">RISCV</option>
        <option value="binary">Binary</option>
        <option value="hexadecimal">Hexadecimal</option>
      </select>
      <button (click)="switchFormats()" class="bg-gray-700 border border-gray-500 p-1 px-2 rounded flex justify-center items-center">
        <span class="-mt-[3px]">â†”</span>
      </button>
      <select [(ngModel)]="selectedOutputFormat" class="bg-gray-700 border border-gray-500 p-1 rounded" (change)="onOutputFormatChange($event)">
        <option value="binary">Binary</option>
        <option value="riscv">RISCV</option>
        <option value="hexadecimal">Hexadecimal</option>
      </select>
    </div>
    <div class="flex gap-2">
      <button (click)="copyOutput()" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded">Copy</button>
      <button (click)="downloadOutput()" class="bg-yellow-600 hover:bg-yellow-700 px-3 py-1 rounded">Download</button>
    </div>
  </div>

  <!-- INPUT + OUTPUT -->
  <div class="flex flex-col md:flex-row h-[calc(100%-7.5rem)] p-4 gap-4">
    <!-- INPUT SECTION -->
    <div class="flex flex-col md:w-1/2 w-full h-full border border-gray-600 rounded overflow-hidden bg-gray-800 font-mono">
      <app-text-editor
        (contentChange)="onEditorChange($event)"
        #editor>
      </app-text-editor>
      <input type="file" #fileInput accept=".s,.asm,.txt" (change)="onFileSelected($event)" hidden>
    </div>

    <!-- OUTPUT SECTION -->
    <div class="flex flex-col md:w-1/2 w-full h-full border border-gray-600 rounded overflow-hidden bg-gray-800 font-mono">
      <div class="flex overflow-auto w-full h-full">
        <!-- Line Numbers -->
        <div class="bg-gray-900 text-gray-400 text-right pt-2 select-none w-10 leading-[1.5rem] shrink-0">
          @for (line of lineNumbers(); track line) {
            <div class="bg-gray-900 pr-2">{{ line }}</div>
          }
        </div>
        <!-- Output Preformatted Text -->
        <pre class="flex-1 text-white pt-2 pl-2 whitespace-pre-wrap font-mono leading-[1.5rem]">{{outputText()}}</pre>
      </div>
    </div>
  </div>
</main>

<router-outlet />
