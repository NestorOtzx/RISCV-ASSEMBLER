import { RiscVToBinary } from '../translator';

describe('RiscVToBinary I-Type Instructions', () => {
  const cases = [
    ['addi x5, x6, 7', '00000000011100110000001010010011'],
    ['addi t0, t1, 5', '00000000010100110000001010010011'],
    ['slti x5, x6, 7', '00000000011100110010001010010011'],
    ['slti s0, s1, 10', '00000000101001001010010000010011'],
    ['andi x5, x6, 7', '00000000011100110111001010010011'],
    ['andi a0, a1, 3', '00000000001101011111010100010011'],
    ['ori x5, x6, 7', '00000000011100110110001010010011'],
    ['ori t0, t1, 15', '00000000111100110110001010010011'],
    ['xori x5, x6, 7', '00000000011100110100001010010011'],
    ['xori s0, s1, 9', '00000000100101001100010000010011'],
    ['slli x5, x6, 7', '00000000011100110001001010010011'],
    ['slli a0, a1, 2', '00000000001001011001010100010011'],
    ['srli x5, x6, 7', '00000000011100110101001010010011'],
    ['srli t0, t1, 4', '00000000010000110101001010010011'],
    ['srai x5, x6, 7', '01000000011100110101001010010011'],
    ['srai s0, s1, 3', '01000000001101001101010000010011'],
    ['lw x5, 0(x6)', '00000000000000110010001010000011'],
    ['lw t0, 4(t1)', '00000000010000110010001010000011'],
    ['lb x5, 0(x6)', '00000000000000110000001010000011'],
    ['lb s0, 8(s1)', '00000000100001001000010000000011'],
    ['lh x5, 0(x6)', '00000000000000110001001010000011'],
    ['lh a0, 12(a1)', '00000000110001011001010100000011'],
    ['lbu x5, 0(x6)', '00000000000000110100001010000011'],
    ['lbu t0, 16(t1)', '00000001000000110100001010000011'],
    ['lhu x5, 0(x6)', '00000000000000110101001010000011'],
    ['lhu s0, 20(s1)', '00000001010001001101010000000011']
  ];
  for (const [instruction, expected] of cases) {
    it(`encodes "${instruction}" correctly`, () => {
      const result = RiscVToBinary([instruction], 8);
      expect(result.output[0]).toBe(expected);
      expect(result.errors.length).toBe(0);
    });
  }
});
